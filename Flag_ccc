<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flag Master</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        #quiz, #results {
            display: none;
        }
        img {
            width: 200px;
            height: auto;
        }
        .option {
            margin: 5px;
            display: block;
        }
    </style>
</head>
<body>

    <h1>Flag Master</h1>
    <div id="settings">
        <label for="numQuestions">Number of Questions (Max 500): </label>
        <input type="number" id="numQuestions" min="1" max="500" value="10"><br><br>
        
        <label for="timeLimit">Time per Question: </label>
        <select id="timeLimit">
            <option value="5">5 seconds</option>
            <option value="10">10 seconds</option>
            <option value="20">20 seconds</option>
            <option value="30">30 seconds</option>
            <option value="60">1 minute</option>
        </select><br><br>

        <button onclick="startQuiz()">Start Quiz</button>
    </div>

    <div id="quiz">
        <h2 id="question"></h2>
        <img id="flag" alt="Country Flag"><br>
        <div id="options"></div>
        <button onclick="nextQuestion()">Next</button>
        <div id="timer">Time left: <span id="time">0</span>s</div>
    </div>

    <div id="results">
        <h2>Quiz Results</h2>
        <p>Total Attempts: <span id="attempts"></span></p>
        <p>Correct Answers: <span id="correct"></span></p>
        <p>Incorrect Answers: <span id="incorrect"></span></p>
        <p>Your Score: <span id="score"></span></p>
        <button onclick="restartQuiz()">Restart Quiz</button>
    </div>

    <script>
        const quizData = [
            {
                "continent": "Africa",
                "country": "Algeria",
                "url": "https://flagcdn.com/w320/dz.png",
                "capital": "Algiers",
                "currency": "Dinar"
            },
            {
                "continent": "Africa",
                "country": "Angola",
                "url": "https://flagcdn.com/w320/ao.png",
                "capital": "Luanda",
                "currency": "New Kwanza"
            },
            {
                "continent": "Africa",
                "country": "Benin",
                "url": "https://flagcdn.com/w320/bj.png",
                "capital": "Porto-Novo",
                "currency": "CFA Franc"
            },
            {
                "continent": "Africa",
                "country": "Botswana",
                "url": "https://flagcdn.com/w320/bw.png",
                "capital": "Gaborone",
                "currency": "Pula"
            },
            {
                "continent": "Africa",
                "country": "Burkina Faso",
                "url": "https://flagcdn.com/w320/bf.png",
                "capital": "Ouagadougou",
                "currency": "CFA Franc"
            },
            {
                "continent": "Africa",
                "country": "Burundi",
                "url": "https://flagcdn.com/w320/bi.png",
                "capital": "Gitega",
                "currency": "Burundi franc"
            },
            {
                "continent": "Africa",
                "country": "Cameroon",
                "url": "https://flagcdn.com/w320/cm.png",
                "capital": "Yaounde",
                "currency": "CFA Franc"
            },
            {
                "continent": "Africa",
                "country": "Democratic Republic of the Congo",
                "url": "https://flagcdn.com/w320/cd.png",
                "capital": "Kinshasa",
                "currency": "Congolese Franc"
            },
            {
                "continent": "Africa",
                "country": "Egypt",
                "url": "https://flagcdn.com/w320/eg.png",
                "capital": "Cairo",
                "currency": "Egyptian pound"
            },
            {
                "continent": "Asia",
                "country": "Afghanistan",
                "url": "https://flagcdn.com/w320/af.png",
                "capital": "Kabul",
                "currency": "Afghani"
            },
            {
                "continent": "Asia",
                "country": "China",
                "url": "https://flagcdn.com/w320/cn.png",
                "capital": "Beijing",
                "currency": "Chinese Yuan"
            },
            {
                "continent": "Asia",
                "country": "India",
                "url": "https://flagcdn.com/w320/in.png",
                "capital": "New Delhi",
                "currency": "Indian Rupee"
            },
            {
                "continent": "Asia",
                "country": "Japan",
                "url": "https://flagcdn.com/w320/jp.png",
                "capital": "Tokyo",
                "currency": "Yen"
            },
            {
                "continent": "Europe",
                "country": "France",
                "url": "https://flagcdn.com/w320/fr.png",
                "capital": "Paris",
                "currency": "Euro"
            },
            {
                "continent": "Europe",
                "country": "Germany",
                "url": "https://flagcdn.com/w320/de.png",
                "capital": "Berlin",
                "currency": "Euro"
            },
            {
                "continent": "Europe",
                "country": "United Kingdom",
                "url": "https://flagcdn.com/w320/gb.png",
                "capital": "London",
                "currency": "Pound Sterling"
            },
            {
                "continent": "North America",
                "country": "Canada",
                "url": "https://flagcdn.com/w320/ca.png",
                "capital": "Ottawa",
                "currency": "Canadian Dollar"
            },
            {
                "continent": "North America",
                "country": "United States",
                "url": "https://flagcdn.com/w320/us.png",
                "capital": "Washington, D.C.",
                "currency": "USD"
            },
            {
                "continent": "South America",
                "country": "Brazil",
                "url": "https://flagcdn.com/w320/br.png",
                "capital": "Brasilia",
                "currency": "Real"
            }
        ];

        let currentQuestion = 0;
        let totalQuestions = 0;
        let timeLimit = 0;
        let timer;
        let score = 0;
        let attempts = 0;
        let correctAnswers = 0;
        let incorrectAnswers = 0;

        function startQuiz() {
            totalQuestions = parseInt(document.getElementById("numQuestions").value);
            timeLimit = parseInt(document.getElementById("timeLimit").value);
            currentQuestion = 0;
            score = 0;
            attempts = 0;
            correctAnswers = 0;
            incorrectAnswers = 0;

            document.getElementById("settings").style.display = "none";
            document.getElementById("quiz").style.display = "block";
            document.getElementById("results").style.display = "none";
            nextQuestion();
        }

        function nextQuestion() {
            clearInterval(timer);
            if (currentQuestion >= totalQuestions) {
                showResults();
                return;
            }
            const data = quizData[Math.floor(Math.random() * quizData.length)];
            displayQuestion(data);
            currentQuestion++;
            attempts++;
            startTimer();
        }

        function displayQuestion(data) {
            const questionTypes = [
                `The flag belongs to which continent?`,
                `This flag belongs to which country?`,
                `Choose the currency of the country to which the flag belongs?`,
                `Choose the capital of the country to which the flag belongs?`
            ];
            const question = questionTypes[Math.floor(Math.random() * questionTypes.length)];
            document.getElementById("question").innerText = question;
            document.getElementById("flag").src = data.url;

            const optionsDiv = document.getElementById("options");
            optionsDiv.innerHTML = '';

            if (question.includes('continent')) {
                createOptions([data.continent], 'continent');
            } else if (question.includes('country')) {
                createOptions([data.country], 'country');
            } else if (question.includes('currency')) {
                createOptions([data.currency], 'currency');
            } else if (question.includes('capital')) {
                createOptions([data.capital], 'capital');
            }
        }

        function createOptions(correctAnswer, field) {
            let options = quizData.map(item => item[field]);
            options = [...new Set(options)].sort(() => Math.random() - 0.5);
            options = options.slice(0, 4);
            if (!options.includes(correctAnswer[0])) {
                options[Math.floor(Math.random() * options.length)] = correctAnswer[0];
            }

            options.forEach(option => {
                const btn = document.createElement("button");
                btn.innerText = option;
                btn.className = "option";
                btn.onclick = () => checkAnswer(option, correctAnswer[0]);
                document.getElementById("options").appendChild(btn);
            });
        }

        function checkAnswer(answer, correctAnswer) {
            clearInterval(timer);
            if (answer === correctAnswer) {
                correctAnswers++;
                score++;
            } else {
                incorrectAnswers++;
                score -= 0.25;
            }
            nextQuestion();
        }

        function startTimer() {
            let timeLeft = timeLimit;
            document.getElementById("time").innerText = timeLeft;
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById("time").innerText = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(timer);
                    checkAnswer("", "");
                }
            }, 1000);
        }

        function showResults() {
            document.getElementById("quiz").style.display = "none";
            document.getElementById("results").style.display = "block";
            document.getElementById("attempts").innerText = attempts;
            document.getElementById("correct").innerText = correctAnswers;
            document.getElementById("incorrect").innerText = incorrectAnswers;
            document.getElementById("score").innerText = score.toFixed(2);
        }

        function restartQuiz() {
            document.getElementById("settings").style.display = "block";
            document.getElementById("quiz").style.display = "none";
            document.getElementById("results").style.display = "none";
        }
    </script>

</body>
</html>
